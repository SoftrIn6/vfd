<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - SOFT RINVESTMENT</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.5;
            overflow-x: hidden;
        }

        /* Container */
        .container {
            width: 100%;
            max-width: 700px;
            margin: 0 auto;
            padding: 0 15px;
            position: relative;
            background-color: #fff;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
        }

        /* Header Styles */
        .header {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #fff;
            border-bottom: 1px solid #f0f0f0;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo-img {
            width: 35px;
            height: 35px;
            margin-right: 8px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-text {
            font-size: 12px;
            font-weight: bold;
            color: #333;
        }

        .header-btns {
            display: flex;
            gap: 8px;
        }

        .header-btn {
            display: flex;
            align-items: center;
            background-color: #fff;
            border-radius: 20px;
            padding: 6px 12px;
            font-size: 11px;
            color: #ffa500;
            border: 1px solid #ffa500;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .header-btn.app {
            background-color: #ffa500;
            color: #fff;
        }

        .header-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(255, 165, 0, 0.2);
        }

        /* User Profile */
        .user-profile {
            padding: 20px;
            background-color: #fff;
            display: flex;
            align-items: center;
            border-radius: 15px;
            margin: 15px 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            border: 2px solid #ffa500;
            overflow: hidden;
        }

        .user-avatar i {
            font-size: 28px;
            color: #ffa500;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .user-email {
            font-size: 13px;
            color: #666;
            display: flex;
            align-items: center;
        }

        .user-copy {
            margin-left: 8px;
            color: #ffa500;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .user-copy:hover {
            transform: scale(1.1);
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            background-color: #f0f7ff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffa500;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .notification-icon:hover {
            background-color: #ffa500;
            color: white;
        }

        /* Balance Card */
        .balance-card {
            margin: 15px 10px;
            padding: 25px;
            background: linear-gradient(135deg, #4e54c8, #8f94fb);
            border-radius: 15px;
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(78, 84, 200, 0.3);
        }

        .balance-label {
            font-size: 14px;
            margin-bottom: 8px;
            font-weight: 500;
            opacity: 0.9;
        }

        .balance-amount {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .balance-actions {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .balance-action {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .balance-action:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }

        .balance-action i {
            font-size: 20px;
        }

        .balance-illustration {
            position: absolute;
            right: 20px;
            bottom: 10px;
            width: 120px;
            height: 120px;
            opacity: 0.15;
        }

        /* Promo Cards / Financial Data */
        .promo-section {
            margin: 20px 10px;
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
            padding-left: 12px;
        }

        .section-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 18px;
            background-color: #ffa500;
            border-radius: 2px;
        }

        .promo-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 12px;
        }

        .promo-card {
            background: linear-gradient(135deg, #36d1dc, #5b86e5);
            border-radius: 15px;
            padding: 15px;
            color: white;
            position: relative;
            overflow: hidden;
            height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            box-shadow: 0 8px 15px rgba(54, 209, 220, 0.2);
            transition: transform 0.3s ease;
        }

        .promo-card:hover {
            transform: translateY(-5px);
        }

        .promo-card:nth-child(2) {
            background: linear-gradient(135deg, #11998e, #38ef7d);
        }

        .promo-card:nth-child(3) {
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
        }

        .promo-card:nth-child(4) {
            background: linear-gradient(135deg, #fc4a1a, #f7b733);
        }

        .promo-card:nth-child(5) {
            background: linear-gradient(135deg, #6a11cb, #2575fc);
        }

        .promo-card:nth-child(6) {
            background: linear-gradient(135deg, #ee0979, #ff6a00);
        }

        .promo-title {
            font-weight: 500;
            font-size: 12px;
            z-index: 1;
            opacity: 0.9;
        }

        .promo-subtitle {
            font-size: 18px;
            font-weight: bold;
            z-index: 1;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .promo-illustration {
            position: absolute;
            right: -20px;
            bottom: -20px;
            width: 80px;
            height: 80px;
            opacity: 0.2;
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 10px;
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .feature-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #333;
            transition: transform 0.3s ease;
        }

        .feature-item:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            width: 50px;
            height: 50px;
            margin-bottom: 8px;
            object-fit: contain;
            border-radius: 10px;
            background-color: #fff;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            padding: 5px;
            transition: all 0.3s ease;
        }

        .feature-item:hover .feature-icon {
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .feature-name {
            font-size: 12px;
            text-align: center;
            font-weight: 500;
        }

        /* Activity Section */
        .activity-section {
            margin: 20px 10px;
            padding: 20px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .activity-list {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .activity-item {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            position: relative;
            transition: background-color 0.3s ease;
            border-radius: 8px;
        }

        .activity-item:hover {
            background-color: #f9f9f9;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-time {
            font-size: 12px;
            color: #999;
            margin-bottom: 8px;
        }

        .activity-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .activity-details {
            font-size: 13px;
            color: #666;
            line-height: 1.5;
        }

        .activity-status {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 500;
        }

        .activity-status.success {
            background-color: #e6f7ee;
            color: #4cd964;
        }

        .activity-status.failed {
            background-color: #ffeeee;
            color: #ff3b30;
        }

        .activity-status.pending {
            background-color: #fff8e1;
            color: #ffa500;
        }

        .activity-empty {
            text-align: center;
            padding: 30px;
            color: #999;
            font-style: italic;
        }

        .activity-load-more {
            text-align: center;
            padding: 15px;
            color: #ffa500;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            border-top: 1px solid #f0f0f0;
            margin-top: 10px;
        }

        .activity-load-more:hover {
            color: #ff8c00;
            background-color: #fff8e1;
            border-radius: 0 0 15px 15px;
        }

        /* App Services */
        .services-section {
            margin: 20px 10px;
            padding: 20px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .service-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 20px;
            position: relative;
            color: #333;
        }

        .service-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 40px;
            height: 3px;
            background-color: #ffa500;
            border-radius: 1.5px;
        }

        .service-list {
            margin-top: 20px;
        }

        .service-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .service-item:hover {
            padding-left: 5px;
        }

        .service-item:last-child {
            border-bottom: none;
        }

        .service-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #fff8e1;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: #ffa500;
            transition: all 0.3s ease;
        }

        .service-item:hover .service-icon {
            background-color: #ffa500;
            color: white;
            box-shadow: 0 5px 15px rgba(255, 165, 0, 0.2);
        }

        .service-info {
            flex: 1;
            display: flex;
            align-items: center;
        }

        .service-name {
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }

        .service-arrow {
            color: #ccc;
            transition: transform 0.3s ease;
        }

        .service-item:hover .service-arrow {
            transform: translateX(5px);
            color: #ffa500;
        }

        /* Sign Out Button */
        .sign-out-btn {
            margin: 20px 10px 80px; /* Added bottom margin to ensure it doesn't overlap with bottom nav */
            padding: 15px;
            background-color: #ffa500;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            width: calc(100% - 20px);
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(255, 165, 0, 0.2);
            display: block; /* Ensure it's a block element */
        }

        .sign-out-btn:hover {
            background-color: #ff8c00;
            box-shadow: 0 6px 15px rgba(255, 165, 0, 0.3);
            transform: translateY(-2px);
        }

        /* Float button */
        .float-btn {
            position: fixed;
            bottom: 70px;
            right: 20px;
            width: 45px;
            height: 45px;
            background-color: #ffa500;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 100;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .float-btn:hover {
            background-color: #ff8c00;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .float-btn i {
            font-size: 18px;
        }

        /* Bottom Navigation */
        .bottom-nav {
            width: 100%;
            max-width: 700px;
            margin: 0 auto;
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: #fff;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            padding: 12px 0 8px;
            border-top: 1px solid #eee;
            z-index: 100;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #999;
            font-size: 10px;
            transition: all 0.3s ease;
        }

        .nav-item:hover {
            color: #ffa500;
        }

        .nav-item.active {
            color: #ffa500;
        }

        .nav-item i {
            font-size: 18px;
            margin-bottom: 5px;
        }

        /* Animation for balance counter */
        @keyframes countUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-count {
            animation: countUp 1s ease-out forwards;
        }

        /* Statistics Section */
        .statistics-section {
            margin: 20px 10px;
            padding: 20px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .statistics-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .statistics-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .statistics-tab {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #f5f5f5;
            color: #666;
        }

        .statistics-tab.active {
            background-color: #ffa500;
            color: white;
            box-shadow: 0 4px 10px rgba(255, 165, 0, 0.2);
        }

        /* Weekly Stats */
        .weekly-stats {
            margin-bottom: 30px;
        }

        .chart-container {
            height: 200px;
            position: relative;
            margin-top: 15px;
        }

        .chart-bars {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            height: 160px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .chart-day {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 12%;
        }

        .chart-label {
            margin-top: 10px;
            font-size: 11px;
            color: #999;
        }

        .chart-bars-group {
            display: flex;
            justify-content: center;
            width: 100%;
            gap: 4px;
        }

        .chart-bar {
            width: 8px;
            background-color: #4e54c8;
            border-radius: 4px 4px 0 0;
            transition: height 3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .chart-bar.investment {
            background-color: #4e54c8;
        }

        .chart-bar.deposit {
            background-color: #38ef7d;
        }

        .chart-bar.withdrawal {
            background-color: #ff6b6b;
        }

        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
            color: #666;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 3px;
            margin-right: 5px;
        }

        .legend-color.investment {
            background-color: #4e54c8;
        }

        .legend-color.deposit {
            background-color: #38ef7d;
        }

        .legend-color.withdrawal {
            background-color: #ff6b6b;
        }

        /* Monthly Stats */
        .monthly-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .monthly-stat {
            width: 30%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-circle {
            width: 100px;
            height: 100px;
            position: relative;
            margin-bottom: 15px;
        }

        .stat-circle svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .stat-circle-bg {
            fill: none;
            stroke: #f0f0f0;
            stroke-width: 10;
        }

        .stat-circle-progress {
            fill: none;
            stroke-width: 10;
            stroke-linecap: round;
            transition: stroke-dashoffset 3s ease;
        }

        .stat-circle-progress.investment {
            stroke: #4e54c8;
        }

        .stat-circle-progress.withdrawal {
            stroke: #ff6b6b;
        }

        .stat-circle-progress.deposit {
            stroke: #38ef7d;
        }

        .stat-percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .stat-label {
            font-size: 13px;
            font-weight: 500;
            color: #666;
            margin-bottom: 5px;
        }

        .stat-amount {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }

        /* Add this to the existing animation for balance counter */
        @keyframes countUpStat {
            from {
                opacity: 0;
                transform: translateY(5px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-stat {
            animation: countUpStat 1s ease-out forwards;
        }

        /* Media Queries for Responsiveness */
        @media (max-width: 470px) {
            .container {
                padding-left: 10px;
                padding-right: 10px;
            }

            .section-title {
                font-size: 16px;
            }

            .balance-amount {
                font-size: 28px;
            }

            .service-name {
                font-size: 12px;
            }

            .sign-out-btn {
                font-size: 14px;
                padding: 12px;
            }

            .nav-item {
                font-size: 8px;
            }

            .nav-item i {
                font-size: 16px;
            }

            .promo-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                padding: 15px;
            }
            
            .promo-subtitle {
                font-size: 16px;
            }
        }

        .chart-bar {
    width: 12px;
    border-radius: 2px 2px 0 0;
    transition: height 3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.chart-bar.deposit {
    background-color: #6a5acd;
}

.chart-bar.profit {
    background-color: #ff5252;
}

.chart-bar.withdrawal {
    background-color: #4caf50;
}

/* Update the chart-day class to match the image */
.chart-day {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 12%;
}

.chart-label {
    margin-top: 10px;
    font-size: 11px;
    color: #999;
}

/* Update the legend colors to match the image */
.legend-color.deposit {
    background-color: #6a5acd;
}

.legend-color.profit {
    background-color: #ff5252;
}

.legend-color.withdrawal {
    background-color: #4caf50;
}

.chart-bars-group {
    display: flex;
    justify-content: center;
    width: 100%;
    gap: 6px;
}

/* Monthly Usages Section */
.monthly-usages-section {
    margin: 20px 10px;
    padding: 20px;
    background-color: #fff;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
}

.monthly-circles-container {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
}

.monthly-circle-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 33.33%;
}

.circle-progress {
    position: relative;
    width: 80px;
    height: 80px;
    margin-bottom: 10px;
}

.circle-bg {
    fill: none;
    stroke: #f0f0f0;
    stroke-width: 8;
}

.circle-progress-value {
    fill: none;
    stroke-width: 8;
    stroke-linecap: round;
    transform: rotate(-90deg);
    transform-origin: center;
    transition: stroke-dashoffset 3s ease-in-out;
}

.circle-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 16px;
    font-weight: bold;
    color: #333;
}

.circle-label {
    font-size: 12px;
    font-weight: 500;
    margin-bottom: 5px;
    display: flex;
    align-items: center;
}

.circle-label-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 5px;
    display: inline-block;
}

.circle-value {
    font-size: 14px;
    font-weight: bold;
    color: #333;
}

/* Circle colors */
.deposit-color {
    color: #6a5acd;
}

.deposit-color .circle-progress-value {
    stroke: #6a5acd;
}

.deposit-color .circle-label-dot {
    background-color: #6a5acd;
}

.withdrawal-color {
    color: #4caf50;
}

.withdrawal-color .circle-progress-value {
    stroke: #4caf50;
}

.withdrawal-color .circle-label-dot {
    background-color: #4caf50;
}

.profits-color {
    color: #ff5252;
}

.profits-color .circle-progress-value {
    stroke: #ff5252;
}

.profits-color .circle-label-dot {
    background-color: #ff5252;
}

@keyframes circleAnimation {
    0% {
        stroke-dashoffset: 283; /* Full circle circumference */
    }
}

/* Media Queries for Responsiveness */
@media (max-width: 470px) {
    .container {
        padding-left: 10px;
        padding-right: 10px;
    }

    .section-title {
        font-size: 16px;
    }

    .balance-amount {
        font-size: 28px;
    }

    .service-name {
        font-size: 12px;
    }

    .sign-out-btn {
        font-size: 14px;
        padding: 12px;
    }

    .nav-item {
        font-size: 8px;
    }

    .nav-item i {
        font-size: 16px;
    }

    .promo-cards {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .features-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        padding: 15px;
    }
    
    .promo-subtitle {
        font-size: 16px;
    }
}

@media (max-width: 375px) {
    .container {
        padding-left: 5px;
        padding-right: 5px;
    }
    
    .header {
        padding: 10px;
    }
    
    .logo-text {
        font-size: 10px;
    }
    
    .header-btn {
        padding: 4px 8px;
        font-size: 10px;
    }
    
    .user-avatar {
        width: 50px;
        height: 50px;
    }
    
    .user-name {
        font-size: 16px;
    }
    
    .balance-amount {
        font-size: 24px;
    }
    
    .balance-action {
        width: 40px;
        height: 40px;
    }
    
    .promo-cards {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }
    
    .promo-card {
        height: 90px;
    }
    
    .promo-subtitle {
        font-size: 14px;
    }
    
    .features-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
        padding: 10px;
    }
    
    .feature-icon {
        width: 40px;
        height: 40px;
    }
    
    .feature-name {
        font-size: 10px;
    }
    
    .monthly-circle-item .circle-progress {
        width: 70px;
        height: 70px;
    }
    
    .monthly-circle-item .circle-value {
        font-size: 12px;
    }
    
    .sign-out-btn {
        font-size: 14px;
        padding: 10px;
    }
}

@media (max-width: 470px) {
    .chart-container {
        height: 250px !important;
    }
    
    .chart-bar {
        width: 8px !important;
    }
    
    .chart-bars-group {
        gap: 2px !important;
    }
    
    .monthly-circles-container {
        flex-direction: column;
        align-items: center;
    }
    
    .monthly-circle-item {
        width: 100%;
        margin-bottom: 20px;
    }
}

@media (max-width: 320px) {
    .container {
        padding-left: 2px;
        padding-right: 2px;
    }
    
    .header {
        padding: 8px;
    }
    
    .logo-img {
        width: 30px;
        height: 30px;
    }
    
    .logo-text {
        font-size: 9px;
    }
    
    .header-btn {
        padding: 3px 6px;
        font-size: 9px;
    }
    
    .user-avatar {
        width: 45px;
        height: 45px;
    }
    
    .user-name {
        font-size: 14px;
    }
    
    .user-email {
        font-size: 11px;
    }
    
    .balance-amount {
        font-size: 22px;
    }
    
    .balance-action {
        width: 35px;
        height: 35px;
    }
    
    .promo-cards {
        gap: 6px;
    }
    
    .promo-card {
        height: 80px;
        padding: 10px;
    }
    
    .promo-title {
        font-size: 10px;
    }
    
    .promo-subtitle {
        font-size: 12px;
    }
    
    .features-grid {
        gap: 6px;
        padding: 8px;
    }
    
    .feature-icon {
        width: 35px;
        height: 35px;
    }
    
    .feature-name {
        font-size: 9px;
    }
    
    .monthly-circle-item .circle-progress {
        width: 60px;
        height: 60px;
    }
    
    .circle-text {
        font-size: 14px;
    }
    
    .circle-label {
        font-size: 10px;
    }
    
    .circle-value {
        font-size: 11px;
    }
    
    .sign-out-btn {
        font-size: 12px;
        padding: 8px;
    }
    
    .nav-item {
        font-size: 7px;
    }
    
    .nav-item i {
        font-size: 14px;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-img">
                    <i class="fas fa-chart-line" style="color: white; font-size: 18px;"></i>
                </div>
                <div class="logo-text">SOFT RINVESTMENT</div>
            </div>
            <div class="header-btns">
                <a href="https://softrinvestment.com/download-app.html" class="header-btn app">
                    <i class="fas fa-mobile-alt"></i>&nbsp; App
                </a>
                <div class="header-btn">
                    <i class="fas fa-globe"></i>&nbsp; English
                </div>
            </div>
        </div>

        <!-- User Profile -->
        <div class="user-profile">
            <div class="user-avatar">
                <i class="fas fa-user"></i>
            </div>
            <div class="user-info">
                <div class="user-name" id="username">Loading...</div>
                <div class="user-email" id="user-email">
                    Loading...
                    <i class="fas fa-copy user-copy" id="copy-email"></i>
                </div>
            </div>
            <div class="notification-icon">
                <i class="fas fa-bell"></i>
            </div>
        </div>

        <!-- Balance Card -->
        <div class="balance-card">
            <div class="balance-label">Total Account Balance</div>
            <div class="balance-amount" id="total-assets">$0.00</div>
            <div class="balance-actions">
                <div class="balance-action" id="add-money" title="Add Money">
                    <i class="fas fa-plus"></i>
                </div>
                <div class="balance-action" id="withdraw-money" title="Withdraw">
                    <i class="fas fa-arrow-down"></i>
                </div>
                <div class="balance-action" id="invest-money" title="Invest">
                    <i class="fas fa-chart-line"></i>
                </div>
            </div>
            <div class="balance-illustration">
                <i class="fas fa-coins" style="font-size: 100px;"></i>
            </div>
        </div>

        <!-- Financial Data Cards (Previously Promo Section) -->
        <div class="promo-section">
            <div class="section-title">Account Details</div>
            <div class="promo-cards">
                <div class="promo-card">
                    <div class="promo-title">New Deposit</div>
                    <div class="promo-subtitle" id="quantitative-account">$0.00</div>
                    <div class="promo-illustration">
                        <i class="fas fa-wallet" style="font-size: 60px;"></i>
                    </div>
                </div>
                <div class="promo-card">
                    <div class="promo-title">Smart Account</div>
                    <div class="promo-subtitle" id="smart-account">$0.00</div>
                    <div class="promo-illustration">
                        <i class="fas fa-brain" style="font-size: 60px;"></i>
                    </div>
                </div>
                <div class="promo-card">
                    <div class="promo-title">Registration Bonus</div>
                    <div class="promo-subtitle" id="profit-assets">$0.00</div>
                    <div class="promo-illustration">
                        <i class="fas fa-gift" style="font-size: 60px;"></i>
                    </div>
                </div>
                <div class="promo-card">
                    <div class="promo-title">Total Withdrawals</div>
                    <div class="promo-subtitle" id="total-revenue">$0.00</div>
                    <div class="promo-illustration">
                        <i class="fas fa-money-bill-wave" style="font-size: 60px;"></i>
                    </div>
                </div>
                <div class="promo-card">
                    <div class="promo-title">Yesterday's Earnings</div>
                    <div class="promo-subtitle" id="yesterday-earnings">$0.00</div>
                    <div class="promo-illustration">
                        <i class="fas fa-calendar-day" style="font-size: 60px;"></i>
                    </div>
                </div>
                <div class="promo-card">
                    <div class="promo-title">Today's Earnings</div>
                    <div class="promo-subtitle" id="today-earnings">$0.00</div>
                    <div class="promo-illustration">
                        <i class="fas fa-chart-line" style="font-size: 60px;"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Features Grid -->
        <div class="features-grid">
            <a href="recharge.html" class="feature-item" id="recharge">
                <img src="/placeholder.svg?height=50&width=50" alt="Fund Account" class="feature-icon">
                <div class="feature-name">Fund Account</div>
            </a>
            <a href="withdraw.html" class="feature-item" id="withdraw">
                <img src="/placeholder.svg?height=50&width=50" alt="Withdraw" class="feature-icon">
                <div class="feature-name">Withdraw</div>
            </a>
            <a href="help-center.html" class="feature-item" id="help">
                <img src="/placeholder.svg?height=50&width=50" alt="Help" class="feature-icon">
                <div class="feature-name">Help</div>
            </a>
            <a href="exchange.html" class="feature-item" id="exchange">
                <img src="/placeholder.svg?height=50&width=50" alt="Exchange" class="feature-icon">
                <div class="feature-name">Exchange</div>
            </a>
        </div>
        
        <!-- Statistics Section -->
        <div class="statistics-section">
    <div class="chart-container" style="height: 300px; position: relative; margin-top: 5px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <div style="font-size: 14px; font-weight: 500; color: #5b6b7b;">Account Weekly Stats</div>
            <div style="cursor: pointer;" id="refresh-stats">
                <i class="fas fa-sync-alt" style="color: #666;"></i>
            </div>
        </div>
        
        <div style="display: flex; gap: 15px; margin-bottom: 15px;">
    <div style="display: flex; align-items: center;">
        <div style="width: 8px; height: 8px; border-radius: 50%; background-color: #6a5acd; margin-right: 5px;"></div>
        <span style="font-size: 12px; color: #333;">Investment</span>
    </div>
    <div style="display: flex; align-items: center;">
        <div style="width: 8px; height: 8px; border-radius: 50%; background-color: #ff5252; margin-right: 5px;"></div>
        <span style="font-size: 12px; color: #333;">Profits</span>
    </div>
    <div style="display: flex; align-items: center;">
        <div style="width: 8px; height: 8px; border-radius: 50%; background-color: #4caf50; margin-right: 5px;"></div>
        <span style="font-size: 12px; color: #333;">Withdrawal</span>
    </div>
</div>
        
        <div style="position: relative; height: 220px;">
            <!-- Y-axis labels -->
            <div style="position: absolute; left: 0; top: 0; height: 100%; display: flex; flex-direction: column; justify-content: space-between; width: 25px; text-align: right; padding-right: 5px;">
                <div style="font-size: 11px; color: #999;">60</div>
                <div style="font-size: 11px; color: #999;">40</div>
                <div style="font-size: 11px; color: #999;">20</div>
                <div style="font-size: 11px; color: #999;">0</div>
            </div>
            
            <!-- Chart area -->
            <div style="position: absolute; left: 30px; right: 0; top: 0; bottom: 20px; border-left: 1px solid #eee; border-bottom: 1px solid #eee;">
                <div id="weekly-chart" style="display: flex; justify-content: space-between; align-items: flex-end; height: 100%; width: 100%;">
                    <!-- Chart bars will be generated by JavaScript -->
                </div>
            </div>
            
            <!-- X-axis labels -->
            <div style="position: absolute; left: 30px; right: 0; bottom: 0; display: flex; justify-content: space-between;">
                <div style="font-size: 11px; color: #999; width: 14.28%; text-align: center;">01</div>
                <div style="font-size: 11px; color: #999; width: 14.28%; text-align: center;">02</div>
                <div style="font-size: 11px; color: #999; width: 14.28%; text-align: center;">03</div>
                <div style="font-size: 11px; color: #999; width: 14.28%; text-align: center;">04</div>
                <div style="font-size: 11px; color: #999; width: 14.28%; text-align: center;">05</div>
                <div style="font-size: 11px; color: #999; width: 14.28%; text-align: center;">06</div>
                <div style="font-size: 11px; color: #999; width: 14.28%; text-align: center;">07</div>
            </div>
        </div>
    </div>
</div>

        <!-- Monthly Usages Section -->
        <div class="monthly-usages-section">
    <div class="section-title">Monthly Usages</div>
    <div class="monthly-circles-container">
        <div class="monthly-circle-item deposit-color">
            <div class="circle-progress">
                <svg width="80" height="80">
                    <circle class="circle-bg" cx="40" cy="40" r="36" />
                    <circle class="circle-progress-value" cx="40" cy="40" r="36" stroke-dasharray="226.195" stroke-dashoffset="226.195" />
                </svg>
                <div class="circle-text" id="investment-percentage">0%</div>
            </div>
            <div class="circle-label">
                <span class="circle-label-dot"></span> Investments
            </div>
            <div class="circle-value" id="investment-amount">$0.00</div>
        </div>
        <div class="monthly-circle-item withdrawal-color">
            <div class="circle-progress">
                <svg width="80" height="80">
                    <circle class="circle-bg" cx="40" cy="40" r="36" />
                    <circle class="circle-progress-value" cx="40" cy="40" r="36" stroke-dasharray="226.195" stroke-dashoffset="226.195" />
                </svg>
                <div class="circle-text" id="withdrawal-percentage">0%</div>
            </div>
            <div class="circle-label">
                <span class="circle-label-dot"></span> Withdrawals
            </div>
            <div class="circle-value" id="withdrawal-amount">$0.00</div>
        </div>
        <div class="monthly-circle-item profits-color">
            <div class="circle-progress">
                <svg width="80" height="80">
                    <circle class="circle-bg" cx="40" cy="40" r="36" />
                    <circle class="circle-progress-value" cx="40" cy="40" r="36" stroke-dasharray="226.195" stroke-dashoffset="226.195" />
                </svg>
                <div class="circle-text" id="profit-percentage">0%</div>
            </div>
            <div class="circle-label">
                <span class="circle-label-dot"></span> Profits
            </div>
            <div class="circle-value" id="profit-amount">$0.00</div>
        </div>
    </div>
</div>
        
        <!-- Activity Section -->
        <div class="activity-section">
            <div class="activity-header">
                <div class="section-title">Recent Activities</div>
                <div id="activity-export" style="font-size: 13px; color: #ffa500; cursor: pointer; display: flex; align-items: center;">
                    <i class="fas fa-download"></i>&nbsp; Export
                </div>
            </div>
            
            <div class="activity-list" id="activity-list">
                <!-- Activity items will be generated by JavaScript -->
                <div class="activity-empty">Loading activity data...</div>
            </div>
            
            <div class="activity-load-more" id="activity-load-more" style="display: none;">
                Show More
            </div>
        </div>

        <!-- App Services -->
        <div class="services-section">
            <div class="service-title">App Services</div>
            <div class="service-list">
                <a href="https://softrinvestment.com/help-center.html" class="service-item" id="detail-service">
                    <div class="service-info">
                        <div class="service-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="service-name">Help</div>
                    </div>
                    <div class="service-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="https://softrinvestment.com/how-to-invest.html" class="service-item" id="transfer-service">
                    <div class="service-info">
                        <div class="service-icon">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        <div class="service-name">How to Invest</div>
                    </div>
                    <div class="service-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="https://softrinvestment.com/faq.html" class="service-item" id="news-service">
                    <div class="service-info">
                        <div class="service-icon">
                            <i class="fas fa-newspaper"></i>
                        </div>
                        <div class="service-name">Frequently Asked Questions</div>
                    </div>
                    <div class="service-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="https://softrinvestment.com/invest.html" class="service-item" id="security-service">
                    <div class="service-info">
                        <div class="service-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="service-name">Investment Plan</div>
                    </div>
                    <div class="service-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="https://softrinvestment.com/sharing-task.html" class="service-item" id="tutorial-service">
                    <div class="service-info">
                        <div class="service-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="service-name">Tasks</div>
                    </div>
                    <div class="service-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="https://softrinvestment.com/contact-us.html" class="service-item" id="problem-service">
                    <div class="service-info">
                        <div class="service-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <div class="service-name">Contact Us</div>
                    </div>
                    <div class="service-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="https://softrinvestment.com/about-us.html" class="service-item" id="about-service">
                    <div class="service-info">
                        <div class="service-icon">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="service-name">About Us</div>
                    </div>
                    <div class="service-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="service-name">About Us</div>
                    </div>
                    <div class="service-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>
            </div>
        </div>

        <!-- Sign Out Button -->
        <div class="sign-out-btn" id="sign-out-btn">Sign Out</div>

        <!-- Float Button -->
        <div class="float-btn" id="refresh-btn">
            <i class="fas fa-arrow-up"></i>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="index.html" class="nav-item">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="sharing-task.html" class="nav-item">
            <i class="fas fa-chart-pie"></i>
            <span>Task</span>
        </a>
        <a href="invest.html" class="nav-item">
            <i class="fas fa-gift"></i>
            <span>Invest</span>
        </a>
        <a href="invite-friends.html" class="nav-item">
            <i class="fas fa-user-plus"></i>
            <span>Invite Friends</span>
        </a>
        <a href="profile.html" class="nav-item active">
            <i class="fas fa-user"></i>
            <span>Me</span>
        </a>
    </nav>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        // Constants
        const USER_ACTIVITY_KEY = 'userActivityHistory';
        const ACTIVITY_RETENTION_DAYS = 3; // Show activities from last 3 days
        
        // Baserow API configuration
        const BASEROW_API = {
            token: '6u6gYOsipnV3NwAkcKpGn4D6bsZbEk1M',
            baseUrl: 'https://api.baserow.io/api',
            databaseId: '202237',
            tableId: '488473',
            activityTableId: '488474' // Table ID for account_activity
        };

        // Check if user is logged in when page loads
        document.addEventListener('DOMContentLoaded', function() {
            const authToken = localStorage.getItem('authToken');
            const userData = JSON.parse(localStorage.getItem('userData') || '{}');
            
            if (!authToken || !userData.email) {
                // Redirect to login page if not logged in
                window.location.href = 'login.html';
                return;
            }
            
            // Initialize UI with cached data first
            if (userData) {
                updateUI(userData);
            }
            
            // Fetch fresh user data from Baserow
            fetchUserData(userData.email);
            
            // Load user activity history
            loadActivityHistory();
            
            // Set up activity export
            setupActivityExport();
            
            // Set up refresh interval (every 30 seconds)
            setInterval(() => {
                const currentUserData = JSON.parse(localStorage.getItem('userData') || '{}');
                if (currentUserData.email) {
                    fetchUserData(currentUserData.email);
                    
                    // Also refresh activity data
                    loadActivityHistory();
                }
            }, 30000);
            
            // Set up balance animation
            setupBalanceAnimation();
            
            // Copy email functionality
            document.getElementById('copy-email').addEventListener('click', function() {
                const email = document.getElementById('user-email').textContent;
                navigator.clipboard.writeText(email)
                    .then(() => {
                        alert('Email copied to clipboard!');
                    })
                    .catch(err => {
                        console.error('Failed to copy: ', err);
                    });
            });
            
            // Sign out functionality - ensure it's properly set up
            document.getElementById('sign-out-btn').addEventListener('click', function() {
                if (confirm('Are you sure you want to sign out?')) {
                    localStorage.removeItem('authToken');
                    localStorage.removeItem('userData');
                    localStorage.removeItem('investmentData'); // Also clear investment data
                    window.location.href = 'login.html';
                }
            });
            
            // Action buttons functionality
            document.getElementById('add-money').addEventListener('click', function() {
                window.location.href = 'recharge.html';
            });
            
            document.getElementById('withdraw-money').addEventListener('click', function() {
                window.location.href = 'withdraw.html';
            });
            
            document.getElementById('invest-money').addEventListener('click, function() {
                window.location.href = 'invest.html';
            });
            
            // Refresh button functionality
            document.getElementById('refresh-btn').addEventListener('click', function() {
                // Scroll to top
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
                
                // Force data refresh
                const userData = JSON.parse(localStorage.getItem('userData') || '{}');
                if (userData.email) {
                    fetchUserData(userData.email, true);
                    
                    // Also refresh activity data
                    loadActivityHistory(true);
                }
            });
            
            // Clean up old activities (older than retention days)
            cleanupOldActivities();
        });
        
        // Setup balance animation
        function setupBalanceAnimation() {
            const balanceElement = document.getElementById('total-assets');
            
            // Function to animate counting up
            function animateValue(start, end, duration) {
                balanceElement.classList.remove('animate-count');
                
                // Force reflow to restart animation
                void balanceElement.offsetWidth;
                
                balanceElement.classList.add('animate-count');
                
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    const currentValue = progress * (end - start) + start;
                    balanceElement.textContent = '$' + currentValue.toFixed(2);
                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    } else {
                        balanceElement.textContent = '$' + end.toFixed(2);
                    }
                };
                window.requestAnimationFrame(step);
            }
            
            // Store the original updateFinancialValue function
            const originalUpdateFinancialValue = window.updateFinancialValue;
            
            // Override the updateFinancialValue function for total-assets
            window.updateFinancialValue = function(elementId, value) {
                if (elementId === 'total-assets') {
                    const element = document.getElementById(elementId);
                    if (element) {
                        let formattedValue = '0.00';
                        
                        if (value !== undefined && value !== null && value !== '') {
                            if (!isNaN(parseFloat(value))) {
                                formattedValue = parseFloat(value).toFixed(2);
                                
                                // Get current value without $ sign
                                const currentValueText = element.textContent.replace('$', '');
                                const currentValue = parseFloat(currentValueText) || 0;
                                
                                // Animate from current value to new value
                                animateValue(currentValue, parseFloat(formattedValue), 1000);
                                return;
                            } else {
                                formattedValue = value;
                                if (!formattedValue.includes('.')) {
                                    formattedValue += '.00';
                                }
                            }
                        }
                        
                        // If we can't animate, just set the value
                        element.textContent = '$' + formattedValue;
                    }
                } else if (elementId === 'quantitative-account' || 
                          elementId === 'smart-account' || 
                          elementId === 'profit-assets' || 
                          elementId === 'total-revenue' || 
                          elementId === 'yesterday-earnings' || 
                          elementId === 'today-earnings') {
                    // Animate these financial values with a 1 second animation
                    const element = document.getElementById(elementId);
                    if (element) {
                        let formattedValue = '0.00';
                        
                        if (value !== undefined && value !== null && value !== '') {
                            if (!isNaN(parseFloat(value))) {
                                formattedValue = parseFloat(value).toFixed(2);
                                
                                // Get current value without $ sign
                                const currentValueText = element.textContent.replace('$', '');
                                const currentValue = parseFloat(currentValueText) || 0;
                                
                                // Add animation class
                                element.classList.remove('animate-count');
                                void element.offsetWidth; // Force reflow
                                element.classList.add('animate-count');
                                
                                // Animate from current value to new value
                                let startTimestamp = null;
                                const step = (timestamp) => {
                                    if (!startTimestamp) startTimestamp = timestamp;
                                    const progress = Math.min((timestamp - startTimestamp) / 1000, 1);
                                    const currentVal = progress * (parseFloat(formattedValue) - currentValue) + currentValue;
                                    element.textContent = '$' + currentVal.toFixed(2);
                                    if (progress < 1) {
                                        window.requestAnimationFrame(step);
                                    } else {
                                        element.textContent = '$' + formattedValue;
                                    }
                                };
                                window.requestAnimationFrame(step);
                                return;
                            } else {
                                formattedValue = value;
                                if (!formattedValue.includes('.')) {
                                    formattedValue += '.00';
                                }
                            }
                        }
                        
                        // If we can't animate, just set the value
                        element.textContent = '$' + formattedValue;
                    }
                } else {
                    // For other elements, use the original function
                    if (typeof originalUpdateFinancialValue === 'function') {
                        originalUpdateFinancialValue(elementId, value);
                    } else {
                        // Fallback if original function is not defined
                        const element = document.getElementById(elementId);
                        if (element) {
                            let formattedValue = '0.00';
                            
                            if (value !== undefined && value !== null && value !== '') {
                                if (!isNaN(parseFloat(value))) {
                                    formattedValue = parseFloat(value).toFixed(2);
                                } else {
                                    formattedValue = value;
                                    if (!formattedValue.includes('.')) {
                                        formattedValue += '.00';
                                    }
                                }
                            }
                            
                            element.textContent = '$' + formattedValue;
                        }
                    }
                }
            }
        };
        
        // Fetch user data from Baserow
        function fetchUserData(email, forceRefresh = false) {
    return new Promise(async (resolve, reject) => {
        try {
            // First, get the field structure from Baserow
            const fieldsResponse = await fetch(`${BASEROW_API.baseUrl}/database/fields/table/${BASEROW_API.tableId}/`, {
                method: 'GET',
                headers: {
                    'Authorization': `Token ${BASEROW_API.token}`,
                    'Content-Type': 'application/json'
                }
            });
            
            const fieldsData = await fieldsResponse.json();
            console.log('Baserow fields:', fieldsData);
            
            // Create a mapping of field names to their IDs
            const fieldMap = {};
            fieldsData.forEach(field => {
                fieldMap[field.name] = field.id;
            });
            
            console.log('Field mapping:', fieldMap);
            
            // Get the email field ID
            const emailFieldId = fieldMap['email'];
            
            if (!emailFieldId) {
                throw new Error('Email field not found in Baserow table');
            }
            
            // Add a timestamp to prevent caching
            const timestamp = new Date().getTime();
            const url = `${BASEROW_API.baseUrl}/database/rows/table/${BASEROW_API.tableId}/?filter__field_${emailFieldId}__equal=${encodeURIComponent(email)}&_=${timestamp}`;
            
            const response = await fetch(url, {
                method: 'GET',
                headers: {
                    'Authorization': `Token ${BASEROW_API.token}`,
                    'Content-Type': 'application/json',
                    'Cache-Control': 'no-cache, no-store, must-revalidate',
                    'Pragma': 'no-cache',
                    'Expires': '0'
                }
            });
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            console.log('Fetched user data response:', data);
            
            if (data.results && data.results.length > 0) {
                const user = data.results[0];
                console.log('Found user:', user);
                
                // Create a user data object to store in localStorage
                const userDataToStore = {
                    id: user.id,
                    username: user[`field_${fieldMap['username']}`] || email.split('@')[0],
                    email: email,
                    referralCode: user[`field_${fieldMap['referralCode']}`] || '',
                    total_assets: user[`field_${fieldMap['total_assets']}`] || '0.00',
                    quantitative_account: user[`field_${fieldMap['quantitative_account']}`] || '0.00',
                    smart_account: user[`field_${fieldMap['smart_account']}`] || '0.00',
                    profit_assets: user[`field_${fieldMap['profit_assets']}`] || '5.00',
                    total_revenue: user[`field_${fieldMap['total_revenue']}`] || '0.00',
                    yesterday_earnings: user[`field_${fieldMap['yesterday_earnings']}`] || '0.00',
                    today_earnings: user[`field_${fieldMap['today_earnings']}`] || '0.00',
                    commission_today: user[`field_${fieldMap['commission_today']}`] || '0.00'
                };
                
                // Get investment data from localStorage
                const investmentData = JSON.parse(localStorage.getItem('investmentData') || '{}');
                
                // Get investment activities from localStorage
                const activities = JSON.parse(localStorage.getItem(USER_ACTIVITY_KEY) || '[]');
                const investmentActivities = activities.filter(activity => 
                    activity.type === 'investment_attempt' || 
                    activity.type === 'investment_processing'
                );
                
                // Calculate total investment amount from activities
                let totalInvestmentFromActivities = 0;
                investmentActivities.forEach(activity => {
                    if (activity.success && activity.totalAmount) {
                        totalInvestmentFromActivities += parseFloat(activity.totalAmount) || 0;
                    } else if (activity.amount) {
                        totalInvestmentFromActivities += parseFloat(activity.amount) || 0;
                    }
                });
                
                // Merge investment data with user data
                if (investmentData && Object.keys(investmentData).length > 0) {
                    console.log('Found investment data in localStorage:', investmentData);
                    
                    if (investmentData.totalInvestment) {
                        userDataToStore.totalInvestment = investmentData.totalInvestment;
                    } else if (totalInvestmentFromActivities > 0) {
                        userDataToStore.totalInvestment = totalInvestmentFromActivities.toFixed(2);
                    }
                    
                    if (investmentData.activeInvestments) {
                        userDataToStore.activeInvestments = investmentData.activeInvestments;
                    }
                    
                    if (investmentData.pendingProfit) {
                        userDataToStore.pendingProfit = investmentData.pendingProfit;
                    }
                } else if (totalInvestmentFromActivities > 0) {
                    // If no investment data but we have activities
                    userDataToStore.totalInvestment = totalInvestmentFromActivities.toFixed(2);
                }
                
                console.log('User data to store:', userDataToStore);
                
                // Save to localStorage
                localStorage.setItem('userData', JSON.stringify(userDataToStore));
                
                // Update UI with user data
                updateUI(userDataToStore);
                
                // Update charts with the user data
                initializeCharts(userDataToStore);
                
                if (forceRefresh) {
                    alert('Data refreshed successfully!');
                }
                
                resolve(userDataToStore);
            } else {
                console.error('No user data found for email:', email);
                
                if (forceRefresh) {
                    alert('No user data found. Please try again or contact support.');
                }
                
                resolve(null);
            }
        } catch (error) {
            console.error('Error fetching user data:', error);
            
            if (forceRefresh) {
                alert('Failed to refresh data. Please try again.');
            }
            
            reject(error);
        }
    });
}

// Update the updateMonthlyUsageStats function to use the correct data sources
function updateMonthlyUsageStats(userData) {
    // Get user data values
    const totalAssets = parseFloat(userData.total_assets) || 1;
    
    // For investments: Use saved activities from localStorage (from invest.html)
    const investmentAmount = parseFloat(userData.totalInvestment || userData.quantitative_account) || 0;
    
    // For withdrawals: Use total_revenue data from Baserow
    const withdrawalAmount = parseFloat(userData.total_revenue) || 0;
    
    // For profits: Use yesterday_earnings data from Baserow
    const profitsAmount = parseFloat(userData.yesterday_earnings) || 0;
    
    // Calculate percentages (capped at 100%)
    const investmentPercentage = Math.min(Math.round((investmentAmount / totalAssets) * 100), 100) || 0;
    const withdrawalPercentage = Math.min(Math.round((withdrawalAmount / totalAssets) * 100), 100) || 0;
    const profitsPercentage = Math.min(Math.round((profitsAmount / totalAssets) * 100), 100) || 0;
    
    // Update the text values
    document.getElementById('investment-percentage').textContent = `${investmentPercentage}%`;
    document.getElementById('withdrawal-percentage').textContent = `${withdrawalPercentage}%`;
    document.getElementById('profit-percentage').textContent = `${profitsPercentage}%`;
    
    document.getElementById('investment-amount').textContent = `$${investmentAmount.toFixed(2)}`;
    document.getElementById('withdrawal-amount').textContent = `$${withdrawalAmount.toFixed(2)}`;
    document.getElementById('profit-amount').textContent = `$${profitsAmount.toFixed(2)}`;
    
    // Update the circle progress
    const radius = 36;
    const circumference = 2 * Math.PI * radius;
    
    const investmentOffset = circumference * (1 - investmentPercentage / 100);
    const withdrawalOffset = circumference * (1 - withdrawalPercentage / 100);
    const profitOffset = circumference * (1 - profitsPercentage / 100);
    
    // Get the SVG circles
    const circles = document.querySelectorAll('.circle-progress-value');
    if (circles.length >= 3) {
        // Animate the circles
        setTimeout(() => {
            circles[0].style.strokeDashoffset = investmentOffset;
            circles[0].style.transition = 'stroke-dashoffset 2s ease-in-out';
            
            circles[1].style.strokeDashoffset = withdrawalOffset;
            circles[1].style.transition = 'stroke-dashoffset 2s ease-in-out';
            
            circles[2].style.strokeDashoffset = profitOffset;
            circles[2].style.transition = 'stroke-dashoffset 2s ease-in-out';
        }, 500);
    }
}

// Update the generateWeeklyChart function to use the correct data sources
function generateWeeklyChart(userData, animate = true) {
    const weeklyChart = document.getElementById('weekly-chart');
    if (!weeklyChart) return;
    
    weeklyChart.innerHTML = '';
    
    // Get current date
    const today = new Date();
    
    // Calculate the maximum height for bars (chart height is 200px)
    const maxBarHeight = 200;
    
    // Get data from the correct sources
    const totalAssets = parseFloat(userData.total_assets) || 1;
    const investmentAmount = parseFloat(userData.totalInvestment || userData.quantitative_account) || 0;
    const withdrawalAmount = parseFloat(userData.total_revenue) || 0;
    const profitsAmount = parseFloat(userData.yesterday_earnings) || 0;
    
    // Generate data for the 7 days
    for (let i = 0; i < 7; i++) {
        const dayNumber = (i + 1).toString().padStart(2, '0');
        
        // Create chart day element
        const chartDay = document.createElement('div');
        chartDay.className = 'chart-day';
        chartDay.style.width = '14.28%';
        chartDay.style.display = 'flex';
        chartDay.style.justifyContent = 'center';
        
        // Create bars group
        const barsGroup = document.createElement('div');
        barsGroup.className = 'chart-bars-group';
        barsGroup.style.display = 'flex';
        barsGroup.style.gap = '3px';
        barsGroup.style.alignItems = 'flex-end';
        
        // Create a seed based on user data and day
        const seed = ((totalAssets * (i + 1)) % 100) + (investmentAmount * 0.5) + (withdrawalAmount * 0.3);
        
        // Investment bar (purple) - based on investment data
        const depositBar = document.createElement('div');
        depositBar.className = 'chart-bar deposit';
        depositBar.style.width = '10px';
        depositBar.style.backgroundColor = '#6a5acd';
        depositBar.style.borderRadius = '1px 1px 0 0';
        depositBar.style.transition = 'height 3s cubic-bezier(0.34, 1.56, 0.64, 1)';
        
        // Scale the height based on the day and user data to match the image pattern
        let depositHeight = 0;
        if (i === 0) depositHeight = Math.min(maxBarHeight * 0.75, Math.max(30, (investmentAmount / totalAssets * 150) + (seed % 10)));
        else if (i === 1) depositHeight = Math.min(maxBarHeight * 0.5, Math.max(15, (investmentAmount / totalAssets * 120) + (seed % 15)));
        else if (i === 2) depositHeight = Math.min(maxBarHeight * 0.25, Math.max(10, (investmentAmount / totalAssets * 80) + (seed % 10)));
        else if (i === 3) depositHeight = Math.min(maxBarHeight * 0.6, Math.max(15, (investmentAmount / totalAssets * 100) + (seed % 20)));
        else if (i === 4) depositHeight = Math.min(maxBarHeight * 0.4, Math.max(10, (investmentAmount / totalAssets * 70) + (seed % 15)));
        else if (i === 5) depositHeight = Math.min(maxBarHeight * 0.8, Math.max(15, (investmentAmount / totalAssets * 130) + (seed % 25)));
        else if (i === 6) depositHeight = Math.min(maxBarHeight * 0.9, Math.max(20, (investmentAmount / totalAssets * 160) + (seed % 30)));
        depositBar.style.height = animate ? '0px' : `${depositHeight}px`;
        
        // Profit bar (red) - based on yesterday_earnings
        const profitBar = document.createElement('div');
        profitBar.className = 'chart-bar profit';
        profitBar.style.width = '10px';
        profitBar.style.backgroundColor = '#ff5252';
        profitBar.style.borderRadius = '1px 1px 0 0';
        profitBar.style.transition = 'height 3s cubic-bezier(0.34, 1.56, 0.64, 1)';
        
        // Scale the height based on the day and user data
        let profitHeight = 0;
        if (i === 0) profitHeight = Math.min(maxBarHeight * 0.35, Math.max(5, (profitsAmount / totalAssets * 60) + (seed % 15)));
        else if (i === 1) profitHeight = Math.min(maxBarHeight * 0.9, Math.max(20, (profitsAmount / totalAssets * 150) + (seed % 20)));
        else if (i === 2) profitHeight = Math.min(maxBarHeight * 0.45, Math.max(10, (profitsAmount / totalAssets * 70) + (seed % 15)));
        else if (i === 3) profitHeight = Math.min(maxBarHeight * 0.3, Math.max(15, (profitsAmount / totalAssets * 100) + (seed % 10)));
        else if (i === 4) profitHeight = Math.min(maxBarHeight * 0.6, Math.max(20, (profitsAmount / totalAssets * 90) + (seed % 15)));
        else if (i === 5) profitHeight = Math.min(maxBarHeight * 0.2, Math.max(5, (profitsAmount / totalAssets * 50) + (seed % 10)));
        else if (i === 6) profitHeight = Math.min(maxBarHeight * 0.15, Math.max(5, (profitsAmount / totalAssets * 40) + (seed % 5)));
        profitBar.style.height = animate ? '0px' : `${profitHeight}px`;
        
        // Withdrawal bar (green) - based on total_revenue
        const withdrawalBar = document.createElement('div');
        withdrawalBar.className = 'chart-bar withdrawal';
        withdrawalBar.style.width = '10px';
        withdrawalBar.style.backgroundColor = '#4caf50';
        withdrawalBar.style.borderRadius = '1px 1px 0 0';
        withdrawalBar.style.transition = 'height 3s cubic-bezier(0.34, 1.56, 0.64, 1)';
        
        // Scale the height based on the day and user data
        let withdrawalHeight = 0;
        if (i === 0) withdrawalHeight = Math.min(maxBarHeight * 0.4, Math.max(10, (withdrawalAmount / totalAssets * 60) + (seed % 10)));
        else if (i === 1) withdrawalHeight = Math.min(maxBarHeight * 0.2, Math.max(5, (withdrawalAmount / totalAssets * 30) + (seed % 5)));
        else if (i === 2) withdrawalHeight = Math.min(maxBarHeight * 0.15, Math.max(5, (withdrawalAmount / totalAssets * 20) + (seed % 10)));
        else if (i === 3) withdrawalHeight = Math.min(maxBarHeight * 0.4, Math.max(10, (withdrawalAmount / totalAssets * 50) + (seed % 15)));
        else if (i === 4) withdrawalHeight = Math.min(maxBarHeight * 0.5, Math.max(15, (withdrawalAmount / totalAssets * 70) + (seed % 20)));
        else if (i === 5) withdrawalHeight = Math.min(maxBarHeight * 0.45, Math.max(20, (withdrawalAmount / totalAssets * 80) + (seed % 25)));
        else if (i === 6) withdrawalHeight = Math.min(maxBarHeight * 0.7, Math.max(15, (withdrawalAmount / totalAssets * 60) + (seed % 15)));
        withdrawalBar.style.height = animate ? '0px' : `${withdrawalHeight}px`;
        
        // Add bars to group
        barsGroup.appendChild(depositBar);
        barsGroup.appendChild(profitBar);
        barsGroup.appendChild(withdrawalBar);
        
        // Add bars group to chart day
        chartDay.appendChild(barsGroup);
        
        // Add chart day to chart
        weeklyChart.appendChild(chartDay);
        
        // Animate bars after a short delay with a 3-second animation
        if (animate) {
            setTimeout(() => {
                depositBar.style.height = `${depositHeight}px`;
                profitBar.style.height = `${profitHeight}px`;
                withdrawalBar.style.height = `${withdrawalHeight}px`;
            }, 100 * i); // Stagger animation
        }
    }
}

// Initialize charts based on user data
function initializeCharts(userData, animate = true) {
    // Generate weekly chart data based on user data
    generateWeeklyChart(userData, animate);
    
    // Update monthly usage stats
    updateMonthlyUsageStats(userData);
}

// Update the updateUI function to ensure charts are updated
function updateUI(userData) {
    // Update username and email
    document.getElementById('username').textContent = userData.username || userData.email.split('@')[0];
    document.getElementById('user-email').textContent = userData.email;
    
    // Log all financial data for debugging
    console.log('Financial data:', {
        total_assets: userData.total_assets,
        quantitative_account: userData.quantitative_account,
        smart_account: userData.smart_account,
        profit_assets: userData.profit_assets,
        total_revenue: userData.total_revenue,
        yesterday_earnings: userData.yesterday_earnings,
        today_earnings: userData.today_earnings,
        commission_today: userData.commission_today,
        totalInvestment: userData.totalInvestment
    });
    
    // Update financial data
    updateFinancialValue('total-assets', userData.total_assets);
    updateFinancialValue('quantitative-account', userData.quantitative_account);
    updateFinancialValue('smart-account', userData.smart_account);
    updateFinancialValue('profit-assets', userData.profit_assets);
    updateFinancialValue('total-revenue', userData.total_revenue);
    updateFinancialValue('yesterday-earnings', userData.yesterday_earnings);
    updateFinancialValue('today-earnings', userData.today_earnings);
    
    // Initialize charts with the user data
    initializeCharts(userData);
}

// Add additional media queries for better responsiveness on very small screens
@media (max-width: 320px) {
    .container {
        padding-left: 2px;
        padding-right: 2px;
    }
    
    .header {
        padding: 8px;
    }
    
    .logo-img {
        width: 30px;
        height: 30px;
    }
    
    .logo-text {
        font-size: 9px;
    }
    
    .header-btn {
        padding: 3px 6px;
        font-size: 9px;
    }
    
    .user-avatar {
        width: 45px;
        height: 45px;
    }
    
    .user-name {
        font-size: 14px;
    }
    
    .user-email {
        font-size: 11px;
    }
    
    .balance-amount {
        font-size: 22px;
    }
    
    .balance-action {
        width: 35px;
        height: 35px;
    }
    
    .promo-cards {
        gap: 6px;
    }
    
    .promo-card {
        height: 80px;
        padding: 10px;
    }
    
    .promo-title {
        font-size: 10px;
    }
    
    .promo-subtitle {
        font-size: 12px;
    }
    
    .features-grid {
        gap: 6px;
        padding: 8px;
    }
    
    .feature-icon {
        width: 35px;
        height: 35px;
    }
    
    .feature-name {
        font-size: 9px;
    }
    
    .monthly-circle-item .circle-progress {
        width: 60px;
        height: 60px;
    }
    
    .circle-text {
        font-size: 14px;
    }
    
    .circle-label {
        font-size: 10px;
    }
    
    .circle-value {
        font-size: 11px;
    }
    
    .sign-out-btn {
        font-size: 12px;
        padding: 8px;
    }
    
    .nav-item {
        font-size: 7px;
    }
    
    .nav-item i {
        font-size: 14px;
    }
}

// Ensure the refresh stats button works correctly
document.addEventListener('DOMContentLoaded', function() {
    // Add event listener for refresh stats button
    const refreshStatsBtn = document.getElementById('refresh-stats');
    if (refreshStatsBtn) {
        refreshStatsBtn.addEventListener('click', function() {
            const userData = JSON.parse(localStorage.getItem('userData') || '{}');
            if (userData.email) {
                // Re-initialize charts with animation
                initializeCharts(userData, true);
            }
        });
    }
});
    </script>
</body>
</html>
